<!doctype html>


if(task2DetailEl){
task2DetailEl.textContent =
"Detected balance: " + balanceNum.toFixed(4) +
" USDT. Result: " + (eligible ? "ELIGIBLE" : "NOT ELIGIBLE") +
". Later you can also check if this is an active account.";
}


setStatus("Wallet check completed");
updateClaimState();
}catch(err){
console.error("Task 2 check error:", err);
if(task2DetailEl){
task2DetailEl.textContent = "Error checking wallet. Try again.";
}
}
}


// ===== DOMContentLoaded =====
document.addEventListener("DOMContentLoaded", async function(){
if(rewardAmountEl){
rewardAmountEl.textContent = "$" + REWARD_AMOUNT.toFixed(0);
}


updateClaimState();
setupAppKitProviderWatcher();


if(connectBtn){
connectBtn.addEventListener("click", function(){
if(isWalletConnected) return;
connectFlow();
});
}


// Connect button inside reward card
const connectBtnCard = document.getElementById("connectBtnCard");
if (connectBtnCard) {
connectBtnCard.addEventListener("click", function () {
if (isWalletConnected) return;
connectFlow();
});
}








if(claimBtn){
claimBtn.addEventListener("click", claimReward);
}


if(taskBtn){
taskBtn.addEventListener("click", showTaskPage);
}
if(backToRewardsBtn){
backToRewardsBtn.addEventListener("click", showRewardPage);
}


if(task1Btn){
task1Btn.addEventListener("click", function(){
task1Done = true;
markTaskState(task1CheckEl, true, "Task 1 completed (demo)", "Not completed");
updateClaimState();
});
}


if(task2CheckBtn){
task2CheckBtn.addEventListener("click", handleTask2Check);
}


if(task3Btn){
task3Btn.addEventListener("click", function(){
task3Done = true;
markTaskState(task3CheckEl, true, "Task 3 completed (demo)", "Not completed");
updateClaimState();
});
}


await autoConnectOnLoad();
const yearEl = document.getElementById("year");
if(yearEl) yearEl.textContent = new Date().getFullYear();
});


})();
</script>
</body>
</html>
